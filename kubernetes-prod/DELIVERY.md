# –ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π) –ø–æ –∑–∞–¥–∞–Ω–∏—é

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è

–°–æ–≥–ª–∞—Å–Ω–æ –∑–∞–¥–∞–Ω–∏—é, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å:

1. ‚úÖ –í—ã–≤–æ–¥ `kubectl get nodes -o wide` –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2. ‚è≥ –í—ã–≤–æ–¥ `kubectl get nodes -o wide` –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
3. ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –Ω–∞ master-–Ω–æ–¥–µ
4. ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –Ω–∞ worker-–Ω–æ–¥–∞—Ö
5. ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –≤–µ—Ä—Å–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤

### 1. –í—ã–≤–æ–¥—ã –∫–æ–º–∞–Ω–¥ kubectl get nodes

**–î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- üìÑ `outputs/nodes-before-upgrade.txt` ‚úÖ (—É–∂–µ —Å–æ–∑–¥–∞–Ω)

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- üìÑ `outputs/nodes-after-upgrade.txt` ‚è≥ (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)

### 2. –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 1: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
- üìÑ `commands/ALL_COMMANDS.md` ‚≠ê - **–í–°–ï –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è**

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–º–∞–Ω–¥—ã –ø–æ —ç—Ç–∞–ø–∞–º (–¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)**
- üìÑ `commands/01-prepare-master.md` - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ master-–Ω–æ–¥—ã
- üìÑ `commands/02-prepare-worker.md` - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ worker-–Ω–æ–¥
- üìÑ `commands/03-init-cluster.md` - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
- üìÑ `commands/04-upgrade-cluster.md` - –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞–Ω–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:

```
kubernetes-prod/
‚îú‚îÄ‚îÄ README.md                          # –û—Å–Ω–æ–≤–Ω–æ–π README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îú‚îÄ‚îÄ ALL_COMMANDS.md                # ‚≠ê –í–°–ï –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
‚îÇ   ‚îî‚îÄ‚îÄ README.md                     # –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ outputs/
    ‚îú‚îÄ‚îÄ nodes-before-upgrade.txt      # –í—ã–≤–æ–¥ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚úÖ
    ‚îî‚îÄ‚îÄ nodes-after-upgrade.txt       # –í—ã–≤–æ–¥ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚è≥
```

## –ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∏ —É–¥–æ–±—Å—Ç–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å:

```
kubernetes-prod/
‚îú‚îÄ‚îÄ README.md                          # –û—Å–Ω–æ–≤–Ω–æ–π README
‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îú‚îÄ‚îÄ ALL_COMMANDS.md                # ‚≠ê –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
‚îÇ   ‚îú‚îÄ‚îÄ 01-prepare-master.md           # –ö–æ–º–∞–Ω–¥—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ master
‚îÇ   ‚îú‚îÄ‚îÄ 02-prepare-worker.md           # –ö–æ–º–∞–Ω–¥—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ worker
‚îÇ   ‚îú‚îÄ‚îÄ 03-init-cluster.md             # –ö–æ–º–∞–Ω–¥—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 04-upgrade-cluster.md          # –ö–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ README.md                      # –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ KUBEADM_JOIN_COMMAND.txt      # –ö–æ–º–∞–Ω–¥–∞ join –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ outputs/
‚îÇ   ‚îú‚îÄ‚îÄ nodes-before-upgrade.txt       # –í—ã–≤–æ–¥ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ nodes-after-upgrade.txt       # –í—ã–≤–æ–¥ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ‚è≥
‚îî‚îÄ‚îÄ scripts/                           # (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ MASTER_COMMANDS.sh
    ‚îú‚îÄ‚îÄ 02-prepare-worker-all.sh
    ‚îú‚îÄ‚îÄ 03-init-cluster.sh
    ‚îú‚îÄ‚îÄ 04-upgrade-master.sh
    ‚îî‚îÄ‚îÄ 04-upgrade-worker.sh
```

## –ß—Ç–æ –ù–ï –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å

‚ùå **–ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ:**
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ SSH –∫–ª—é—á–∏ (`k8s-key` –±–µ–∑ `.pub`)
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å –ø–∞—Ä–æ–ª—è–º–∏
- –§–∞–π–ª—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ IP-–∞–¥—Ä–µ—Å–∞–º–∏ –∏ –ø–∞—Ä–æ–ª—è–º–∏ (–µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –§–∞–π–ª `k8s-key.pub` (–ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á) –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å, –Ω–æ `k8s-key` (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π) - **–ù–ï–õ–¨–ó–Ø**.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

–ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- [x] `outputs/nodes-before-upgrade.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–≤–æ–¥ `kubectl get nodes -o wide` –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] `outputs/nodes-after-upgrade.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—ã–≤–æ–¥ `kubectl get nodes -o wide` –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [x] `commands/ALL_COMMANDS.md` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –¥–µ–π—Å—Ç–≤–∏—è–º

## –§–æ—Ä–º–∞—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–µ—Å—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —á–µ—Ä–µ–∑:
- **GitHub** / **GitLab** / –¥—Ä—É–≥–æ–π Git-—Ö–æ—Å—Ç–∏–Ω–≥
- –ò–ª–∏ –∞—Ä—Ö–∏–≤–æ–º (`.zip` / `.tar.gz`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è Git

–ï—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ —á–µ—Ä–µ–∑ Git, —Å–æ–∑–¥–∞–π—Ç–µ `.gitignore`:

```gitignore
# –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏
k8s-key
*.key
!*.pub

# –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
*.tmp
*.log
/tmp/

# –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
.vscode/
.idea/
```

## –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] –í—ã–≤–æ–¥ `kubectl get nodes -o wide` –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`outputs/nodes-before-upgrade.txt`)
- [ ] –í—ã–≤–æ–¥ `kubectl get nodes -o wide` –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`outputs/nodes-after-upgrade.txt`)
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è master-–Ω–æ–¥—ã (`commands/01-prepare-master.md` –∏–ª–∏ `commands/ALL_COMMANDS.md`)
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è worker-–Ω–æ–¥ (`commands/02-prepare-worker.md` –∏–ª–∏ `commands/ALL_COMMANDS.md`)
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é (`commands/04-upgrade-cluster.md` –∏–ª–∏ `commands/ALL_COMMANDS.md`)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `commands/ALL_COMMANDS.md` - —ç—Ç–æ –æ–¥–∏–Ω —Ñ–∞–π–ª —Å–æ –≤—Å–µ–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ.