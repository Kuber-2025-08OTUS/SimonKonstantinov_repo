# Команды для выполнения домашнего задания

Эта папка содержит пошаговые команды для выполнения всех этапов задания.

## Структура файлов

Эта папка содержит только документацию в формате Markdown. Исполняемые скрипты (.sh) находятся в папке `../scripts/`.

### Основные файлы документации:
0. **00-check-dependencies.md** - Проверка зависимостей и текущего состояния
1. **01-prepare-master.md** - Команды для подготовки master-ноды
2. **02-prepare-worker.md** - Команды для подготовки worker-нод
3. **03-init-cluster.md** - Команды для инициализации кластера
4. **04-upgrade-cluster.md** - Команды для обновления кластера
5. **ALL_COMMANDS.md** - Все команды в одном документе для полного воспроизведения ⭐
6. **QUICK_JOIN.md** - Быстрое присоединение worker-нод к кластеру

### Вспомогательные файлы:
- **KUBEADM_JOIN_COMMAND.txt** - Текст команды kubeadm join для копирования
- **README.md** - Этот файл

**Примечание:** Исполняемые скрипты (.sh) находятся в папке `../scripts/`

## Порядок выполнения

### Этап 0: Проверка зависимостей
Следуйте инструкциям в **00-check-dependencies.md** для проверки:
- Существующих ВМ в Yandex Cloud
- Текущего состояния Kubernetes (если уже установлен)
- Готовности системы к развертыванию

### Этап 1: Подготовка инфраструктуры
Создайте 4 ВМ в Yandex Cloud:
- 1 master-нода: 2vCPU, 8GB RAM
- 3 worker-ноды: 2vCPU, 8GB RAM

**Примечание:** Если у вас уже есть ВМ, проверьте их конфигурацию и при необходимости создайте дополнительные.

### Этап 2: Определение версии Kubernetes
```bash
# Узнайте актуальную версию
curl -L https://dl.k8s.io/release/stable.txt

# Установите версию на одну ниже (например, если актуальная 1.30.x, то используйте 1.29.x)
```

### Этап 3: Подготовка master-ноды
Следуйте инструкциям в **01-prepare-master.md**

### Этап 4: Подготовка worker-нод
Следуйте инструкциям в **02-prepare-worker.md** на каждой worker-ноде

### Этап 5: Инициализация кластера
Следуйте инструкциям в **03-init-cluster.md**

### Этап 6: Обновление кластера
Следуйте инструкциям в **04-upgrade-cluster.md**

## Важные замечания

1. **Версия Kubernetes**: Версия должна быть на одну ниже актуальной (например, если актуальная v1.35.0, используйте v1.34.x)
2. **Права доступа**: Все команды должны выполняться с правами root или через sudo
3. **Последовательность**: Строго следуйте порядку выполнения команд
4. **Сохранение результатов**: Не забудьте сохранить выводы `kubectl get nodes -o wide` до и после обновления в папку `outputs/`
5. **Скрипты**: Если нужны исполняемые скрипты, они находятся в папке `../scripts/`

## Проверка выполнения

После каждого этапа проверяйте:
- Статус сервисов: `systemctl status kubelet containerd`
- Версии компонентов: `kubeadm version`, `kubectl version --client`
- Статус кластера: `kubectl get nodes -o wide`
